function recount(){var t=$(".test-question:visible").length;1==t?$(".numquestions").text(t+" question"):$(".numquestions").text(t+" questions")}function getCookie(t){t=("; "+document.cookie).split(`; ${t}=`);if(2===t.length)return t.pop().split(";").shift()}function getCookie(t){t=("; "+document.cookie).split(`; ${t}=`);if(2===t.length)return t.pop().split(";").shift()}!function(e){e(document).ready(function(){e("#new-question").on("click",function(){var t=e(".test-question:hidden").first().clone(!0);t.find("input:text").val(""),t.find("input:checkbox").prop("checked",!1),t.css("display",""),e(this).closest(".add-question-button").before(t),recount()})})}(jQuery),function(t){t(document).on("DOMNodeInserted",function(){t(".delete").on("click",function(){t(this).closest(".test-question").remove(),recount()})})}(jQuery),function(e){e(document).ready(function(){e(".add").on("click",function(){var t=e(".answer__wrapper").first().clone(!0);t.find("input:text").val(""),t.find("input:checkbox").prop("checked",!1),e(this).closest("button.add").before(t)})})}(jQuery),$("button#check").click(function(){var t=getCookie("userselected_test_id"),t=(console.log(t),"http://127.0.0.1:8002/getTest/"+t);console.log(t),$.get(t,function(t,e){var n=t.pytania,o={};for(i=0;i<n.length;i++)o[n[i].id]=!0;var s=t.odpowiedzi;for(console.log(s),i=0;i<s.length;i++)$.checkAnswer(s[i].pytanie,s[i].id)!=s[i].czyPoprawna&&(console.log(i,s[i].id," "),o[s[i].pytanie]=!1);var c=0;for(key in o)1==o[key]&&c++;document.cookie="test_result="+c,document.cookie="test_max="+n.length,alert("Your result has been written"),window.open("result.html","_self")})}),$.checkAnswer=function(t,e){return $element=$(`#${t}.test-question`),"selected"==($button=$element.find("button#"+e)).attr("class")},$(document).ready(function(){var t=getCookie("userselected_test_id"),t=(console.log(t),"http://127.0.0.1:8002/getTest/"+t);console.log(t),$.get(t,function(t,e){var n=t.test,o=t.pytania,s=t.odpowiedzi;for($(".title").text(n.tytul),$("p.time").text(n.czasTrwania),$("p.numquestions").text(o.length+" question(s)"),i=0;i<o.length;i++)console.log(o[i]),$.insertNewQuestion(o[i].id,o[i].tresc);for(i=0;i<s.length;i++)$.insertAnswer(s[i].pytanie,s[i].id,s[i].tresc)})}),$.insertNewQuestion=function(t,e){var n=$("#hidden_copy.test-question").first().clone(!0).removeAttr("id");n.css("display",""),n.attr("id",t),n.find(".question-title").text(e),$(n).appendTo("form")},$.insertAnswer=function(){var t=$("button#hidden_copy").first().clone(!0);t.css("display",""),t.attr("id",void 0),t.html(void 0),$(`#${function(e){e.fn.autoGrowInput=function(u){u=e.extend({maxWidth:1e3,minWidth:0,comfortZone:70},u);this.filter("input:text").each(function(){var s=u.minWidth||e(this).width(),c="",r=e(this),l=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:r.css("fontSize"),fontFamily:r.css("fontFamily"),fontWeight:r.css("fontWeight"),letterSpacing:r.css("letterSpacing"),whiteSpace:"nowrap"}),t=function(){if(c===(c=r.val()))return;var t=c.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");l.html(t);var e=l.width(),n=e+u.comfortZone>=s?e+u.comfortZone:s,i=r.width(),o=n<i&&n>=s||n>s&&n<u.maxWidth;if(o)r.width(n)};l.insertAfter(r);e(this).bind("keyup keydown blur update",t)});return this}}}.test-question`).find(".answer__wrapper").append(t)}()(jQuery);var getJSON=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="json",n.onload=function(){var t=n.status;200==t?(console.log("status 200: "+n.response),e(n.response)):console.log(t)},n.send(),n.response};function getCookie(t){t=("; "+document.cookie).split(`; ${t}=`);if(2===t.length)return t.pop().split(";").shift()}function callbackFunction(t){t.preventDefault();t=new FormData(t.target);console.log(t)}function checkEmptyFields(t){var e=!0;$("input[type=text]:visible").each(function(){""==$(this).val()&&(e=!1)}),t(e)}function printJSON(){checkEmptyFields(t=>{if(console.log(t),t){data=JSON.stringify($("form").serializeArray()),console.log(data);let t=new XMLHttpRequest;t.open("POST","http://127.0.0.1:8002/addTestV/",!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(result.innerHTML=this.responseText)},t.send(data),alert("Test has been submitted!"),require("fs").writeFile("myjsonfile.json",json,"utf8",callback),alert("Test has been submitted!"),window.open("library.html","_self")}else alert("There is an empty field!")})}window.onload=function(){getJSON("http://127.0.0.1:8002/getAllTests/",e=>{for(let t=0;t<e.testy.length;t++)console.log(e.testy[t]),test=e.testy[t],$.insertNewTest(test.id,test.tytul,test.czasTrwania)})},$.insertNewTest=function(t,e,n){var i=$("#hidden_copy").first().clone(!0).removeAttr("id");i.css("display",""),i.attr("id",t),i.find(".title").text(e),i.find(".time").text(n+" min"),i.find("button.test").attr("id",t),i.find("button.use").attr("id",t),$(i).appendTo("#tests__wrapper")},$(document).ready(function(){$("button").on("click",function(){console.log($(this).attr("id")),"unselected"==$(this).attr("class")?$(this).attr("class","selected"):$(this).attr("class","unselected")})}),$(document).ready(function(){var t=$(".result"),e=getCookie("test_result"),n=getCookie("test_max");t.text(`Your final score is ${e}/${n}!`)}),$(document).ready(function(){$("button.test").on("click",function(){id=$(this).attr("id"),console.log("selected_test_id="+id),document.cookie="userselected_test_id="+id,window.open("test-use.html","_self")})});